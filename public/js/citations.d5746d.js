(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{415:function(t,e,n){var a=n(420);"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(a,i);a.locals&&(t.exports=a.locals)},417:function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return p}),n.d(e,"a",function(){return v});var a=n(416),i=n.n(a),r=n(557),o=n.n(r);function s(t,e,n,a,i,r,o){try{var s=t[r](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,i)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var r=t.apply(e,n);function o(t){s(r,a,i,o,c,"next",t)}function c(t){s(r,a,i,o,c,"throw",t)}o(void 0)})}}function l(t){return/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(t)}function u(t){return/^[0-9Xx]*$/.test(t)&&(10==t.length||13==t.length)}function p(t){var e={id:t.routeKey,type:"URL"==t.type?"webpage":"book",title:t.article_title,publisher:t.web_title};if(t.last_name&&""!=t.last_name&&(e.author=[],e.author[0]={},e.author[0].family=t.last_name,t.first_name&&""!=t.first_name&&(e.author[0].given=t.first_name)),t.date&&""!=t.date&&(e.issued={},e.issued.raw=t.date.split("T")[0]),t.created_at&&""!=t.created_at){var n=t.created_at;n=n.split(" ")[0],e.accessed={},e.accessed.raw=n}return e[t.type]=t.source,e}function d(t){return f.apply(this,arguments)}function f(){return(f=c(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.abrupt("return",n.text());case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function v(t,e){return h.apply(this,arguments)}function h(){return(h=c(i.a.mark(function t(e,n){var a,r,s,c,l,u,p;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.key.replace("dependent/",""),t.next=3,d("https://www.zotero.org/styles/".concat(a));case 3:if(r=t.sent,!e.key.includes("dependent/")){t.next=9;break}return s=new DOMParser,c=s.parseFromString(r,"text/xml"),l=c.querySelector('link[rel="independent-parent"]').getAttribute("href").replace("http:","https:"),t.next=8,d(l);case 8:r=t.sent;case 9:return u={retrieveLocale:function(t){var e=new XMLHttpRequest;return e.open("GET","https://raw.githubusercontent.com/citation-style-language/locales/master/locales-".concat(t,".xml"),!1),e.send(null),e.responseText},retrieveItem:function(t){return n[t]}},(p=new o.a.Engine(u,r)).updateItems(Object.keys(n)),t.abrupt("return",p.makeBibliography());case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}},419:function(t,e,n){"use strict";var a=n(415);n.n(a).a},420:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".row[data-v-c8d7dfbc] {\n  word-break: break-word;\n  color: var(--default-text-color);\n  border-bottom: 1px dotted var(--border-color);\n  padding: 20px;\n  border-radius: 2px;\n  line-height: 30px;\n  position: relative;\n  width: 100%;\n}\n.row[data-v-c8d7dfbc]:last-of-type {\n  border-bottom: none;\n}\n.row p[data-v-c8d7dfbc] {\n  font-size: 16px;\n  padding: 10px;\n  flex: 1;\n  font-weight: 400;\n  color: var(--text-color);\n}\n.row p[data-v-c8d7dfbc] .links {\n  color: var(--main-color);\n}\n.row p[data-v-c8d7dfbc] .links:hover {\n  text-decoration: underline;\n}\n.row .edit[data-v-c8d7dfbc] {\n  font-weight: 700;\n  color: var(--title-color);\n  font-size: 7px;\n  padding: 0 5px;\n}\n.row .edit i[data-v-c8d7dfbc] {\n  font-size: 20px;\n}",""])},423:function(t,e,n){var a=n(570);"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(a,i);a.locals&&(t.exports=a.locals)},556:function(t,e,n){"use strict";var a={name:"Citation",props:{routeKey:{type:String,default:null},string:String,page:{type:String,default:"view"},project_id:{type:String,default:null}}},i=(n(419),n(3)),r=Object(i.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return"view"==t.page?n("div",{staticClass:"row flex flex__center"},[n("p",{domProps:{innerHTML:t._s(t.string)}}),t._v(" "),t.project_id?n("router-link",{staticClass:"edit flex flex__center",attrs:{to:"/projects/"+t.project_id+"/citations/"+t.routeKey}},[n("i",{staticClass:"material-icons"},[t._v("edit")])]):t._e()],1):n("p",{domProps:{innerHTML:t._s(t.string)}})},[],!1,null,"c8d7dfbc",null);e.a=r.exports},569:function(t,e,n){"use strict";var a=n(423);n.n(a).a},570:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,"[data-v-34109899].vdatetime {\n  width: 100%;\n}\n[data-v-34109899].vdatetime .vdatetime-calendar__month__day--selected > span > span,[data-v-34109899].vdatetime .vdatetime-calendar__month__day--selected:hover > span > span,[data-v-34109899].vdatetime .vdatetime-popup__header {\n  background-color: var(--main-color);\n}\n[data-v-34109899].vdatetime .vdatetime-popup__actions__button {\n  color: var(--main-color);\n}\n[data-v-34109899].vdatetime input {\n  outline: 0;\n  padding: 15px;\n  -webkit-appearance: none;\n  color: var(--title-sec-color);\n  border: none;\n  border-radius: 0;\n  background: var(--input-background-color);\n  font-size: 16px;\n  width: 100%;\n  border-radius: 4px;\n}",""])},585:function(t,e,n){"use strict";n.r(e);var a=n(416),i=n.n(a),r=n(417),o=n(556),s=n(49),c=n(108),l=n(565),u=(n(567),{name:"Input",props:{value:{type:String,default:""}},watch:{value:function(t){this.$emit("input",t)}},model:{prop:"value",event:"input"},components:{Datetime:l.Datetime}}),p=(n(569),n(3)),d=Object(p.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group flex__center flex"},[n("Datetime",{attrs:{type:"date"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("label",{class:{used:t.value&&t.value.length>0}},[t._v("Date")])],1)},[],!1,null,"34109899",null).exports;function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e,n,a,i,r,o){try{var s=t[r](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,i)}var _,b,g={name:"Form",data:function(){return{style:null,citation:null,deleteCitationDialog:!1,sources:[],string:"",length:null}},computed:{page:function(){return this.$route.meta.page}},watch:{citation:{handler:(_=i.a.mark(function t(e){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n={})[e.routeKey]=Object(r.d)(v({},e)),t.next=4,Object(r.a)(this.style,n);case 4:a=t.sent,this.string=a[1][0];case 6:case"end":return t.stop()}},t,this)}),b=function(){var t=this,e=arguments;return new Promise(function(n,a){var i=_.apply(t,e);function r(t){m(i,n,a,r,o,"next",t)}function o(t){m(i,n,a,r,o,"throw",t)}r(void 0)})},function(t){return b.apply(this,arguments)}),deep:!0}},mounted:function(){"edit"==this.page?this.getCitation():(this.sources=JSON.parse(decodeURIComponent(this.$route.query.sources)),this.length=this.sources.length,this.retrieveCitation())},methods:{retrieveCitation:function(){var t=this,e=this.sources.shift();"URL"==e.type&&(e.source=decodeURIComponent(e.source)),this.$http.post("projects/".concat(this.$route.params.project_id,"/citations/retrieve"),e).then(function(e){t.style=e.data.project.style,t.citation=e.data})},getCitation:function(){var t=this;this.$http.get("projects/".concat(this.$route.params.project_id,"/citations/").concat(this.$route.params.citation_id)).then(function(e){t.style=e.data.project.style,t.citation=e.data}).catch(function(e){t.$router.push({name:"404 Not Found"})})},addCitation:function(){var t=this,e=v({},this.citation);this.citation=null,this.$http.post("projects/".concat(this.$route.params.project_id,"/citations"),e).then(function(e){t.sources.length>0?t.retrieveCitation():t.$router.push({name:"View Project",params:{project_id:t.$route.params.project_id}})})},editCitation:function(){var t=this,e=v({},this.citation);this.$http.put("projects/".concat(this.$route.params.project_id,"/citations/").concat(this.$route.params.citation_id),e).then(function(e){t.$router.push({name:"View Project",params:{project_id:t.$route.params.project_id}})})},deleteCitation:function(){var t=this;this.deleteCitationDialog=!1,this.$http.delete("projects/".concat(this.$route.params.project_id,"/citations/").concat(this.$route.params.citation_id)).then(function(e){t.$router.push({name:"View Project",params:{project_id:t.$route.params.project_id}})})}},components:{Citation:o.a,Dialog:s.a,Input:c.a,DatePicker:d}},w=Object(p.a)(g,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.citation?n("div",{staticClass:"container",staticStyle:{"margin-top":"20px"}},[n("Dialog",{attrs:{show:t.deleteCitationDialog,type:"small delete-citation",text:"Citation can't be recovered after this. Do you wish to proceed?"},on:{submit:t.deleteCitation,close:function(e){t.deleteCitationDialog=!1}}}),t._v(" "),n("div",{staticClass:"data",attrs:{id:"ref"}},[t.style?n("Citation",{attrs:{string:t.string}}):t._e()],1),t._v(" "),n("form",{staticClass:"form flex",attrs:{"data-type":t.citation.type,method:"POST"}},[n("Input",{ref:"firstName",staticClass:"small",attrs:{label:"First Name"},model:{value:t.citation.first_name,callback:function(e){t.$set(t.citation,"first_name",e)},expression:"citation.first_name"}}),t._v(" "),n("Input",{ref:"lastName",staticClass:"small",attrs:{label:"Last Name"},model:{value:t.citation.last_name,callback:function(e){t.$set(t.citation,"last_name",e)},expression:"citation.last_name"}}),t._v(" "),n("Input",{ref:"articleTitle",staticClass:"small",attrs:{label:"Title",required:!0},model:{value:t.citation.article_title,callback:function(e){t.$set(t.citation,"article_title",e)},expression:"citation.article_title"}}),t._v(" "),n("Input",{ref:"webTitle",staticClass:"small",attrs:{label:"Publisher",required:!0},model:{value:t.citation.web_title,callback:function(e){t.$set(t.citation,"web_title",e)},expression:"citation.web_title"}}),t._v(" "),n("DatePicker",{model:{value:t.citation.date,callback:function(e){t.$set(t.citation,"date",e)},expression:"citation.date"}}),t._v(" "),n("Input",{ref:"source",attrs:{label:"Source",disabled:!0},model:{value:t.citation.source,callback:function(e){t.$set(t.citation,"source",e)},expression:"citation.source"}}),t._v(" "),n("button",{staticClass:"button",on:{click:function(e){e.preventDefault(),"edit"==t.page?t.editCitation():t.addCitation()}}},[t._v(t._s("edit"==t.page?"Update":"Add ("+(t.length-t.sources.length)+"/"+t.length+")"))]),t._v(" "),"edit"==t.page?n("button",{staticClass:"button button-red",on:{click:function(e){e.preventDefault(),t.deleteCitationDialog=!0}}},[t._v("Delete")]):t._e()],1)],1):t._e()},[],!1,null,null,null);e.default=w.exports}}]);