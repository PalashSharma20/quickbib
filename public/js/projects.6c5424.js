(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{415:function(t,e,n){var o=n(420);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(18)(o,r);o.locals&&(t.exports=o.locals)},417:function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return p}),n.d(e,"a",function(){return h});var o=n(416),r=n.n(o),a=n(557),i=n.n(a);function s(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var a=t.apply(e,n);function i(t){s(a,o,r,i,c,"next",t)}function c(t){s(a,o,r,i,c,"throw",t)}i(void 0)})}}function l(t){return/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(t)}function u(t){return/^[0-9Xx]*$/.test(t)&&(10==t.length||13==t.length)}function p(t){var e={id:t.routeKey,type:"URL"==t.type?"webpage":"book",title:t.article_title,publisher:t.web_title};if(t.last_name&&""!=t.last_name&&(e.author=[],e.author[0]={},e.author[0].family=t.last_name,t.first_name&&""!=t.first_name&&(e.author[0].given=t.first_name)),t.date&&""!=t.date&&(e.issued={},e.issued.raw=t.date.split("T")[0]),t.created_at&&""!=t.created_at){var n=t.created_at;n=n.split(" ")[0],e.accessed={},e.accessed.raw=n}return e[t.type]=t.source,e}function d(t){return f.apply(this,arguments)}function f(){return(f=c(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.abrupt("return",n.text());case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function h(t,e){return v.apply(this,arguments)}function v(){return(v=c(r.a.mark(function t(e,n){var o,a,s,c,l,u,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.key.replace("dependent/",""),t.next=3,d("https://www.zotero.org/styles/".concat(o));case 3:if(a=t.sent,!e.key.includes("dependent/")){t.next=9;break}return s=new DOMParser,c=s.parseFromString(a,"text/xml"),l=c.querySelector('link[rel="independent-parent"]').getAttribute("href").replace("http:","https:"),t.next=8,d(l);case 8:a=t.sent;case 9:return u={retrieveLocale:function(t){var e=new XMLHttpRequest;return e.open("GET","https://raw.githubusercontent.com/citation-style-language/locales/master/locales-".concat(t,".xml"),!1),e.send(null),e.responseText},retrieveItem:function(t){return n[t]}},(p=new i.a.Engine(u,a)).updateItems(Object.keys(n)),t.abrupt("return",p.makeBibliography());case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}},418:function(t,e,n){var o=n(559);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(18)(o,r);o.locals&&(t.exports=o.locals)},419:function(t,e,n){"use strict";var o=n(415);n.n(o).a},420:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".row[data-v-c8d7dfbc] {\n  word-break: break-word;\n  color: var(--default-text-color);\n  border-bottom: 1px dotted var(--border-color);\n  padding: 20px;\n  border-radius: 2px;\n  line-height: 30px;\n  position: relative;\n  width: 100%;\n}\n.row[data-v-c8d7dfbc]:last-of-type {\n  border-bottom: none;\n}\n.row p[data-v-c8d7dfbc] {\n  font-size: 16px;\n  padding: 10px;\n  flex: 1;\n  font-weight: 400;\n  color: var(--text-color);\n}\n.row p[data-v-c8d7dfbc] .links {\n  color: var(--main-color);\n}\n.row p[data-v-c8d7dfbc] .links:hover {\n  text-decoration: underline;\n}\n.row .edit[data-v-c8d7dfbc] {\n  font-weight: 700;\n  color: var(--title-color);\n  font-size: 7px;\n  padding: 0 5px;\n}\n.row .edit i[data-v-c8d7dfbc] {\n  font-size: 20px;\n}",""])},421:function(t,e,n){var o=n(562);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(18)(o,r);o.locals&&(t.exports=o.locals)},422:function(t,e,n){var o=n(564);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(18)(o,r);o.locals&&(t.exports=o.locals)},556:function(t,e,n){"use strict";var o={name:"Citation",props:{routeKey:{type:String,default:null},string:String,page:{type:String,default:"view"},project_id:{type:String,default:null}}},r=(n(419),n(3)),a=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return"view"==t.page?n("div",{staticClass:"row flex flex__center"},[n("p",{domProps:{innerHTML:t._s(t.string)}}),t._v(" "),t.project_id?n("router-link",{staticClass:"edit flex flex__center",attrs:{to:"/projects/"+t.project_id+"/citations/"+t.routeKey}},[n("i",{staticClass:"material-icons"},[t._v("edit")])]):t._e()],1):n("p",{domProps:{innerHTML:t._s(t.string)}})},[],!1,null,"c8d7dfbc",null);e.a=a.exports},558:function(t,e,n){"use strict";var o=n(418);n.n(o).a},559:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".projects[data-v-27ee1476] {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  grid-gap: 60px;\n  margin: 10px auto;\n}\n.projects .link[data-v-27ee1476] {\n  background: var(--menu-box-background-color);\n  text-align: left;\n  padding: 20px;\n  display: block;\n  box-shadow: var(--box-shadow-color) 0 10px 24px 0;\n  color: var(--title-color);\n  font-weight: 500;\n  transition: 0.3s box-shadow ease-in;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  border-radius: 4px;\n}\n.projects .link .name[data-v-27ee1476] {\n  font-size: 11px;\n  margin-bottom: 5px;\n  font-weight: 100;\n  text-transform: uppercase;\n  color: var(--title-sec-color);\n  padding: 0;\n  line-height: initial;\n}\n.projects .link[data-v-27ee1476]:hover {\n  box-shadow: var(--box-shadow-color) 0 20px 24px 0;\n}\n@media only screen and (max-width: 1230px) {\n.projects[data-v-27ee1476] {\n    grid-template-columns: repeat(4, 1fr);\n}\n}\n@media only screen and (max-width: 1020px) {\n.projects[data-v-27ee1476] {\n    grid-template-columns: repeat(3, 1fr);\n    grid-gap: 40px;\n}\n}\n@media only screen and (max-width: 810px) {\n.projects[data-v-27ee1476] {\n    grid-template-columns: repeat(2, 1fr);\n}\n}\n@media only screen and (max-width: 600px) {\n.projects[data-v-27ee1476] {\n    margin: 0;\n    grid-template-columns: repeat(1, 1fr);\n    grid-gap: 20px;\n}\n}",""])},561:function(t,e,n){"use strict";var o=n(421);n.n(o).a},562:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".selected[data-v-40216078] {\n  width: 100%;\n  display: flex;\n  padding: 0;\n}\n.selected li[data-v-40216078] {\n  display: block;\n  margin: 10px 10px 10px 0;\n  background: var(--main-color);\n  padding: 0 34px 0 12px;\n  font-size: 18px;\n  float: left;\n  border-radius: 15px;\n  color: #fff;\n  position: relative;\n  box-shadow: var(--box-shadow-color) 0 10px 24px 0;\n}\n.selected li .d[data-v-40216078] {\n  position: absolute;\n  right: 4px;\n  height: 24px;\n  width: 24px;\n  top: 4.5px;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n  user-select: none;\n}\n.selected li .d i[data-v-40216078] {\n  font-size: 15px;\n}",""])},563:function(t,e,n){"use strict";var o=n(422);n.n(o).a},564:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,'.collaborators[data-v-079e6c3c] {\n  display: flex;\n  margin-bottom: 15px;\n}\n.collaborators .collaborator[data-v-079e6c3c] {\n  background: var(--background-color);\n  border-radius: 50%;\n  height: 35px;\n  width: 35px;\n  margin-right: -7px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.collaborators .collaborator[data-v-079e6c3c]:not(.click) {\n  pointer-events: none;\n  user-select: none;\n}\n.collaborators .collaborator.click[data-v-079e6c3c] {\n  cursor: pointer;\n}\n\n/*\n\n  Export\n\n*/\n.export[data-v-079e6c3c] {\n  padding: 60px 115px;\n  margin: 0 auto 30px;\n  width: 100%;\n  min-height: 88.5vh;\n  border-radius: 3px;\n  box-shadow: 0 10px 50px -5px rgba(0, 0, 0, 0.05);\n  outline: 0;\n  background: #fff;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.export .title[data-v-079e6c3c] {\n  margin-bottom: 20px;\n  text-align: center;\n  color: var(--nav-link-color);\n  line-height: 20px;\n  font-family: "Times New Roman", TimesNewRoman, Times, Baskerville, Georgia, serif;\n}\n.export p[data-v-079e6c3c] {\n  margin-bottom: 15px;\n  line-height: 20px;\n  font-family: "Times New Roman", TimesNewRoman, Times, Baskerville, Georgia, serif;\n  color: var(--text-color);\n}\n.export p[data-v-079e6c3c] a {\n  color: #000;\n}\n\n/*\n\n  View\n\n*/\n.view[data-v-079e6c3c] {\n  margin-bottom: 10px;\n  overflow: hidden;\n  border-radius: 3px;\n  box-shadow: 0 10px 50px -5px rgba(0, 0, 0, 0.05);\n  background: var(--form-background-color);\n}\n.citation-count[data-v-079e6c3c] {\n  margin-top: 5px;\n  font-weight: 500;\n  letter-spacing: 0.5px;\n  text-transform: uppercase;\n  color: var(--title-sec-color);\n  font-size: 12px;\n  clear: both;\n}\n.citation-count[data-v-079e6c3c]::before {\n  content: attr(data-count) " ";\n}\n.citation-count[data-v-079e6c3c]::after {\n  content: attr(data-username);\n}\n.desc[data-v-079e6c3c] {\n  display: block;\n  color: var(--title-sec-color);\n  font-size: 14px;\n}\n.recommendations[data-v-079e6c3c] {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-gap: 20px;\n  margin: 10px auto;\n}\n.recommendations .card[data-v-079e6c3c] {\n  background: var(--menu-box-background-color);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow-color) 0 10px 24px 0;\n  font-weight: 500;\n  transition: 0.3s box-shadow ease-in;\n  border-radius: 4px;\n  padding: 20px 15px;\n}\n.recommendations .card h1[data-v-079e6c3c] {\n  font-size: 20px;\n  font-weight: 500;\n}\n.recommendations .card h1 a[data-v-079e6c3c] {\n  color: var(--title-color);\n}\n.recommendations .card .spacer[data-v-079e6c3c] {\n  flex: 1;\n}\n.recommendations .card button[data-v-079e6c3c] {\n  color: var(--main-color);\n  background: transparent;\n  border: none;\n  font-weight: 700;\n  font-size: 14px;\n  cursor: pointer;\n  text-align: left;\n}\n.recommendations .card span[data-v-079e6c3c] {\n  margin-bottom: 10px;\n  display: block;\n}\n@media only screen and (max-width: 810px) {\n.export[data-v-079e6c3c] {\n    padding: 30px 20px;\n}\n}\n@media only screen and (max-width: 600px) {\n.collaborators[data-v-079e6c3c] {\n    display: none;\n}\n.big-title.project[data-v-079e6c3c] {\n    flex-direction: column;\n}\n.big-title.project span[data-v-079e6c3c] {\n    margin-right: 0;\n}\n.big-title.project .right[data-v-079e6c3c] {\n    padding: 20px 0 0;\n}\n.big-title.project .right .btn[data-v-079e6c3c] {\n    margin: 0 12px 0 0;\n}\n}',""])},584:function(t,e,n){"use strict";n.r(e);var o=n(416),r=n.n(o),a=n(417),i=n(556),s=n(49),c=n(108),l={name:"AutoCitationDialog",props:["show"],data:function(){return{inputNumber:1,sources:[{label:"URL or ISBN",source:"",type:null}],error:null}},watch:{inputNumber:function(t){this.sources.push({label:"URL or ISBN",source:"",type:null})},sources:{handler:function(t){t.forEach(function(t){Object(a.c)(t.source)?(t.label="URL",t.type="URL"):Object(a.b)(t.source)?(t.label="ISBN",t.type="isbn"):""==t.source?(t.label="URL or ISBN",t.type=null):(t.label="Invalid",t.type=null)})},deep:!0}},methods:{close:function(){this.$emit("close")},submit:function(){this.error=null,this.sources.every(function(t){return"Invalid"!=t.label})?(this.close(),this.$emit("submit",this.sources.filter(function(t){return t.source.length>0}))):this.error="Some of the URLs or ISBNs provided are invalid."}},components:{Dialog:s.a,Input:c.a}},u=n(3),p=Object(u.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{show:t.show,type:"small",title:"Add Citation(s)",text:t.error},on:{submit:t.submit,close:t.close},scopedSlots:t._u([{key:"buttons",fn:function(){return[t.inputNumber<5?n("button",{staticClass:"no",on:{click:function(e){e.preventDefault(),t.inputNumber++}}},[t._v("ADD MORE")]):t._e()]},proxy:!0}])},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},t._l(t.inputNumber,function(e){return n("Input",{key:e,attrs:{label:t.sources[e-1].label,required:1==e},model:{value:t.sources[e-1].source,callback:function(n){t.$set(t.sources[e-1],"source",n)},expression:"sources[i-1].source"}})}),1)])},[],!1,null,null,null).exports,d=n(184),f={name:"StyleDialog",props:["show","project_style","add_project"],methods:{onSelect:function(t){this.project_style&&t.objectID!=this.project_style.objectID&&this.$emit("selected",t),this.add_project||this.$emit("close")}},components:{Dialog:s.a,StylePicker:d.a}},h=Object(u.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{dismiss:!0,type:"big",title:"Choose a Style",show:t.show},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"text",fn:function(){return[n("p",[t._v("Create citations in any format, with over 9,000 styles to choose from.")]),t._v(" "),t.project_style?n("p",[n("span",{staticStyle:{"font-weight":"500"}},[t._v("Current Style: "+t._s(t.project_style.text))])]):t._e()]},proxy:!0}])},[t._v(" "),n("StylePicker",{attrs:{project_style:t.project_style},on:{selected:t.onSelect}})],1)},[],!1,null,null,null).exports,v={name:"CollabDialog",props:["show","project"],data:function(){return{userSearch:{query:"",results:null}}},watch:{"userSearch.query":{handler:function(t){var e=this;t=t.trim();var n=this.project.routeKey;clearTimeout(this.delay),this.delay=setTimeout(function(){e.userSearch.results=null,""!=t&&e.$http.post("/users/search",{projectId:n,searchTerm:t,numberOfResults:2}).then(function(t){e.userSearch.results=t.data})},1e3)}}},methods:{addCollaborator:function(t){this.userSearch.results=null,this.userSearch.query="",this.$emit("addCollaborator",t)},removeCollaborator:function(t){this.$emit("removeCollaborator",t)}},components:{Dialog:s.a}},m=(n(561),Object(u.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{dismiss:!0,type:"big",show:t.show,title:"Invite a Collaborator",text:"If the person you wish to share your bibliography with has an account on this site, you can add them as a collaborator. They can add or remove people (except the creator)."},on:{close:function(e){return t.$emit("close")}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userSearch.query,expression:"userSearch.query"}],staticClass:"big-input",attrs:{autocomplete:"off",placeholder:"Search Name or Email",type:"text"},domProps:{value:t.userSearch.query},on:{input:function(e){e.target.composing||t.$set(t.userSearch,"query",e.target.value)}}}),t._v(" "),n("div",{staticClass:"list"},[n("ul",{staticClass:"options"},[n("transition",{attrs:{name:"fade"}},t._l(t.userSearch.results,function(e){return n("li",{key:e.id,on:{click:function(n){return n.preventDefault(),t.addCollaborator(e.id)}}},[n("h3",[t._v(t._s(e.name))]),t._v(" "),n("h4",[t._v(t._s(e.email))])])}),0)],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.project.collaborators?n("ul",{staticClass:"selected"},t._l(t.project.collaborators,function(e){return n("li",{key:e.id},[t._v("\n          "+t._s(e.name)+"\n          "),e.id!=t.project.user_id?n("div",{staticClass:"d flex__center flex",on:{click:function(n){return n.preventDefault(),t.removeCollaborator(e.id)}}},[n("i",{staticClass:"material-icons"},[t._v("close")])]):t._e()])}),0):t._e()])],1)])},[],!1,null,"40216078",null).exports);function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function x(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var a=t.apply(e,n);function i(t){b(a,o,r,i,s,"next",t)}function s(t){b(a,o,r,i,s,"throw",t)}i(void 0)})}}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(n,!0).forEach(function(e){j(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={name:"Project",data:function(){return{autoCitationDialog:{visible:!1,submit:!0},styleDialog:!1,collabDialog:!1,deleteProjectDialog:!1,project:null,citationsLoaded:!1,recommendations:[],recommendationPage:1,busy:!1}},computed:{searchString:function(){return this.$parent.$refs.header.searchString.toLowerCase()},filteredCitations:function(){var t=this;return this.project.citations.filter(function(e){return e.string.toLowerCase().includes(t.searchString)})},firstFiveCollaborators:function(){return this.project.collaborators.slice(0,5)},page:function(){return this.$route.meta.page}},watch:{"project.style":{handler:function(t){var e=this;this.citationsLoaded=!1;var n=t.objectID;this.$http.post("projects/".concat(this.project.routeKey),{style_id:n}).then(function(t){e.sortCitations()})},deep:!0}},mounted:function(){this.recommendationPage=this.$route.params.recommendationPage||1,this.getProject()},methods:{getProject:function(){var t=this;this.$http.get("projects/".concat(this.$route.params.project_id)).then(function(e){t.project=e.data,t.$parent.title=t.project.name}).catch(function(e){t.$router.push("/404")})},setStyle:function(t){this.project.style=t},deleteProject:function(){var t=this;this.deleteProjectDialog=!1,this.$http.delete("projects/".concat(this.$route.params.project_id)).then(function(e){t.$parent.getProjects(),t.$router.push("/")})},openAutoCitationDialog:function(){var t=this;this.$http.get("/auth/user").then(function(e){e.data.data.citation_usage.status||(t.autoCitationDialog.submit=!1,t.autoCitationDialog.text="You already have ".concat(t.$auth.user().citation_usage.n," citations. To add more, please upgrade your plan or delete existing citations from any project.")),t.autoCitationDialog.visible=!0})},autoCitation:function(t){this.autoCitationDialog.visible=!1,t.forEach(function(t){delete t.label}),this.$router.push({name:"Add Citation",query:{sources:encodeURIComponent(JSON.stringify(t))}})},sortCitations:function(){var t=this,e={};this.project.citations.forEach(function(t){e[t.routeKey]=Object(a.d)(y({},t))}),Object(a.a)(this.project.style,e).then(function(e){if(e){var n=[].concat.apply([],e[0].entry_ids);t.project.citations=t.project.citations.map(function(t){return t.string=e[1][n.indexOf(t.routeKey)],t}),t.project.citations.sort(function(t,e){return(t=t.string.toLowerCase().replace(/<[^>]+>/gi,"").replace(/[^\w\s]/gi,""))<(e=e.string.toLowerCase().replace(/<[^>]+>/g,"").replace(/[^\w\s]/gi,""))?-1:1}),t.citationsLoaded=!0}})},getCollaborators:function(t){var e=this;this.$http.get("projects/".concat(this.$route.params.project_id,"/collaborators")).then(function(t){e.project.collaborators=t.data})},addCollaborator:function(t){var e=this;this.$http.post("projects/".concat(this.$route.params.project_id,"/collaborators"),{collaboratorId:t}).then(function(t){e.project.collaborators.push(t.data)})},removeCollaborator:function(t){var e=this;this.$http.delete("projects/".concat(this.$route.params.project_id,"/collaborators/").concat(t)).then(function(t){t.data.sameId?e.$router.push({name:"My Projects"}):e.getCollaborators()})},getRecommendations:function(){var t=this;this.busy=!0,this.$http.get("projects/".concat(this.$route.params.project_id,"/recommendations?page=").concat(this.recommendationPage)).then(function(){var e=x(r.a.mark(function e(n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=g(n.data),e.next=3,Promise.all(o.map(function(){var e=x(r.a.mark(function e(n){var o,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("projects/".concat(t.$route.params.project_id,"/citations/retrieve"),{type:"URL",source:n.source});case 2:return o=e.sent,a=o.data,e.abrupt("return",y({},n,{date:a.date,author_name:"".concat(a.first_name," ").concat(a.last_name),title:a.article_title}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:o=e.sent,t.recommendations=o,t.busy=!1;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},dateFormat:function(t){return t=new Date(t),"".concat(t.toLocaleString("default",{month:"long"})," ").concat(t.getFullYear())}},components:{Citation:i.a,Dialog:s.a,AutoCitationDialog:p,StyleDialog:h,CollabDialog:m}},C=(n(563),Object(u.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.project?n("div",{staticClass:"container large"},[t.autoCitationDialog.submit?n("AutoCitationDialog",{attrs:{show:t.autoCitationDialog.visible},on:{submit:t.autoCitation,close:function(e){t.autoCitationDialog.visible=!1}}}):n("Dialog",{attrs:{show:t.autoCitationDialog.visible,type:"small",title:"Citation Limit Reached",text:t.autoCitationDialog.text,dismiss:!0},on:{close:function(e){t.autoCitationDialog.visible=!1}}}),t._v(" "),n("StyleDialog",{attrs:{show:t.styleDialog,project_style:t.project.style},on:{selected:t.setStyle,close:function(e){t.styleDialog=!1}}}),t._v(" "),n("CollabDialog",{attrs:{show:t.collabDialog,project:t.project},on:{addCollaborator:t.addCollaborator,removeCollaborator:t.removeCollaborator,close:function(e){t.collabDialog=!1}}}),t._v(" "),n("Dialog",{attrs:{show:t.deleteProjectDialog,type:"small delete-project",text:"Project and citations can't be recovered after this. Do you wish to proceed?"},on:{submit:t.deleteProject,close:function(e){t.deleteProjectDialog=!1}}}),t._v(" "),n("div",{staticClass:"meta"},[n("div",{staticClass:"big-title project"},[n("span",[n("h1",[n("router-link",{attrs:{to:"/projects/"+t.project.routeKey}},[t._v(t._s(t.project.name))])],1),t._v(" "),n("h4",{staticClass:"citation-count",attrs:{"data-count":t.citationsLoaded?t.filteredCitations.length+" Citation"+(1!=t.filteredCitations.length?"s":"")+" | ":"","data-username":t.project.user.name}})]),t._v(" "),n("div",{staticClass:"right"},[n("a",{staticClass:"btn primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openAutoCitationDialog(e)}}},[n("span",[t._v("ADD CITATION(S)")]),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("add")])]),t._v(" "),n("a",{staticClass:"btn secondary",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.styleDialog=!0}}},[n("span",[t._v("STYLE")]),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("format_quote")])]),t._v(" "),n("a",{staticClass:"btn secondary",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.collabDialog=!0}}},[n("span",[t._v("COLLABORATORS")]),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("people")])]),t._v(" "),t.project.user_id==this.$auth.user().id?n("a",{staticClass:"btn danger",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.deleteProjectDialog=!0}}},[n("span",[t._v("DELETE")]),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("delete")])]):t._e()])]),t._v(" "),t.project.collaborators.length>1?n("div",{staticClass:"collaborators"},[t._l(t.firstFiveCollaborators,function(e){return n("div",{key:e.id,staticClass:"collaborator"},[n("div",{staticClass:"avatar",style:{backgroundColor:"#ffa5001A"}},[n("span",{style:{color:"#ffa500"}},[t._v(t._s(t.$parent.getInitials(e.name)))])])])}),t._v(" "),t.project.collaborators.length>5?n("div",{staticClass:"collaborator click",on:{click:function(e){t.collabDialog=!0}}},[n("div",{staticClass:"avatar",style:{backgroundColor:"var(--form-background-color)"}},[n("span",[t._v("+"+t._s(t.project.collaborators.length-5))])])]):t._e()],2):t._e(),t._v(" "),n("div",{staticClass:"tabs"},[n("router-link",{class:["link",{s:"view"===t.page}],attrs:{to:"/projects/"+t.project.routeKey}},[t._v("VIEW")]),t._v(" "),n("router-link",{class:["link",{s:"export"===t.page}],attrs:{to:"/projects/"+t.project.routeKey+"/export"}},[t._v("EXPORT")])],1)]),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},["view"!==t.page&&"export"!==t.page||!t.citationsLoaded?"recommendations"!==t.page||t.busy?t._e():[t.recommendations.length>0?n("div",{staticClass:"recommendations"},t._l(t.recommendations,function(e,o){return n("a",{key:o,staticClass:"card",attrs:{href:e.source,target:"_BLANK"}},[n("span",[t._v(t._s(t.dateFormat(e.date)))]),t._v(" "),n("h1",[n("a",[t._v(t._s(e.title))])]),t._v(" "),n("p",[t._v(t._s(e.author_name))]),t._v(" "),n("div",{staticClass:"spacer"}),t._v(" "),n("button",{on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.autoCitation([{type:"URL",source:e.source}])}}},[t._v("CITE THIS")])])}),0):n("a",{staticClass:"no-project-message"},[n("div",{staticClass:"icon flex flex__center"},[n("i",{staticClass:"material-icons",style:{"font-size":"230px"}},[t._v("thumbs_up_down")])]),t._v(" "),n("span",{staticClass:"text"},[t._v("No recommendations at the moment. Cite something first.")])])]:[t.project.citations.length>0?n("div",[n("div",{class:t.page,attrs:{contenteditable:"view"!=t.page}},t._l(t.filteredCitations,function(e){return n("Citation",{key:e.routeKey,attrs:{page:t.page,string:e.string,routeKey:e.routeKey,project_id:t.project.routeKey}})}),1)]):n("a",{staticClass:"no-project-message",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.autoCitationDialog.visible=!0}}},[n("div",{staticClass:"icon flex flex__center"},[n("i",{staticClass:"material-icons"},[t._v("add")])]),t._v(" "),n("span",{staticClass:"text"},[t._v("You have no citations. Create a new one.")])])]],2)],1):t._e()},[],!1,null,"079e6c3c",null));e.default=C.exports},587:function(t,e,n){"use strict";n.r(e);var o={name:"AllProjects",computed:{projects:function(){return this.$parent.projects?this.$parent.projects[this.page]:null},searchString:function(){return this.$parent.$refs.header.searchString.toLowerCase().trim()},filteredProjects:function(){var t=this;return this.projects.filter(function(e){return e.name.toLowerCase().includes(t.searchString)})},page:function(){return this.$route.meta.page}},methods:{}},r=(n(558),n(3)),a=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container large"},[n("div",{staticClass:"big-title"},[t._m(0),t._v(" "),n("div",{staticClass:"right"},[n("a",{staticClass:"btn primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$parent.openAddProjectDialog(e)}}},[n("span",[t._v("ADD PROJECT")]),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("add")])])])]),t._v(" "),n("div",{staticClass:"tabs"},[n("router-link",{class:["link",{s:"mine"===t.page}],attrs:{to:"/"}},[t._v("CREATED BY ME")]),t._v(" "),n("router-link",{class:["link",{s:"shared"===t.page}],attrs:{to:"/projects/shared"},nativeOn:{click:function(e){return t.$parent.getProjects(e)}}},[t._v("SHARED WITH ME")])],1),t._v(" "),t.projects?n("div",{staticClass:"flex"},[t.projects.length>0?n("div",{staticClass:"projects"},t._l(t.filteredProjects,function(e){return n("router-link",{key:e.routeKey,staticClass:"link",attrs:{to:"/projects/"+e.routeKey}},["shared"==t.page?n("p",{staticClass:"name"},[t._v(t._s(e.user.name))]):t._e(),t._v("\n        "+t._s(e.name)+"\n      ")])}),1):"mine"===t.page?n("a",{staticClass:"no-project-message",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$parent.openAddProjectDialog(e)}}},[t._m(1),t._v(" "),n("span",{staticClass:"text"},[t._v("You have no projects. Create a new one.")])]):n("a",{staticClass:"no-project-message"},[t._m(2),t._v(" "),n("span",{staticClass:"text"},[t._v("No projects have been shared with you.")])])]):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("h1",[this._v("Projects")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon flex__center flex"},[e("i",{staticClass:"material-icons"},[this._v("add")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon flex flex__center"},[e("i",{staticClass:"material-icons"},[this._v("folder_shared")])])}],!1,null,"27ee1476",null);e.default=a.exports}}]);